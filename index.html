<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEO Meta Tags -->
    <title>URL Status Checker - Free HTTP Status Code & DNS Propagation Tool</title>
    <meta name="description" content="Professional URL status checker with real-time HTTP status codes, DNS propagation maps, and troubleshooting guides. Check up to 100 URLs instantly. Free tool for developers and SEO professionals.">
    <meta name="keywords" content="URL status checker, HTTP status codes, DNS propagation, website uptime monitor, 404 checker, status code analyzer, SEO tools">
    <meta name="author" content="URL Status Checker">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://urlstatuschecker.com">

    <!-- Open Graph -->
    <meta property="og:title" content="URL Status Checker - Professional HTTP & DNS Tool">
    <meta property="og:description" content="Check HTTP status codes and DNS propagation for up to 100 URLs instantly. Free professional tool with troubleshooting guides.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://urlstatuschecker.com">
    <meta property="og:image" content="https://urlstatuschecker.com/og-image.png">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="URL Status Checker - Professional HTTP & DNS Tool">
    <meta name="twitter:description" content="Check HTTP status codes and DNS propagation for up to 100 URLs instantly.">

    <!-- Content Security Policy -->
    <meta http-equiv="Content-Security-Policy" content="
        default-src 'self';
        script-src 'self' 'unsafe-inline' 'unsafe-eval' https://accounts.google.com https://gsi.gstatic.com https://apis.google.com https://js.stripe.com https://*.google.com https://*.googleapis.com https://*.gstatic.com https://cdn.tailwindcss.com https://unpkg.com;
        style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://accounts.google.com https://fonts.gstatic.com https://unpkg.com;
        font-src 'self' https://fonts.gstatic.com;
        img-src 'self' data: blob: https:;
        connect-src 'self' https://accounts.google.com https://www.googleapis.com https://api.urlstatuschecker.com https://auth.urlstatuschecker.com https://*.execute-api.us-east-1.amazonaws.com wss://*.execute-api.us-east-1.amazonaws.com;
        frame-src 'self' https://accounts.google.com https://js.stripe.com https://*.google.com;
        object-src 'none';
        base-uri 'self';
        form-action 'self' https://accounts.google.com
    ">

    <!-- Google OAuth -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>

    <!-- Stripe -->
    <script src="https://js.stripe.com/v3/"></script>

    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Leaflet for Maps -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#6366f1',
                        secondary: '#8b5cf6',
                        success: '#10b981',
                        danger: '#ef4444',
                        warning: '#f59e0b'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif']
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.3s ease-in-out',
                        'slide-up': 'slideUp 0.4s ease-out',
                        'scale-in': 'scaleIn 0.2s ease-out',
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite'
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' }
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(30px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' }
                        },
                        scaleIn: {
                            '0%': { transform: 'scale(0.9)', opacity: '0' },
                            '100%': { transform: 'scale(1)', opacity: '1' }
                        }
                    }
                }
            }
        }
    </script>

    <style>
        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', system-ui, sans-serif;
        }

        ::-webkit-scrollbar {
            width: 12px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #6366f1, #8b5cf6);
            border-radius: 6px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #4f46e5, #7c3aed);
        }

        .gradient-text {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .glass {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .status-badge {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .status-badge:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .float-animation {
            animation: float 3s ease-in-out infinite;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 min-h-screen">

    <!-- Language Selector (Fixed Top Right) -->
    <div class="fixed top-4 right-4 z-50">
        <select id="language-selector" class="glass border border-indigo-200 rounded-lg px-4 py-2 text-sm font-medium text-gray-700 hover:border-indigo-400 transition-colors cursor-pointer shadow-lg">
            <option value="en">🇺🇸 English</option>
            <option value="es">🇪🇸 Español</option>
        </select>
    </div>

    <!-- Header -->
    <header class="glass border-b border-indigo-100 sticky top-0 z-40 shadow-sm">
        <div class="max-w-7xl mx-auto px-6 py-6">
            <div class="flex justify-between items-center">
                <div class="flex items-center gap-4">
                    <div class="w-14 h-14 bg-gradient-to-r from-primary to-secondary rounded-2xl flex items-center justify-center shadow-lg float-animation">
                        <span class="material-icons text-white text-3xl">speed</span>
                    </div>
                    <div>
                        <h1 class="text-3xl font-extrabold gradient-text" data-i18n="site-title">URL Status Checker</h1>
                        <p class="text-sm text-gray-600 font-medium" data-i18n="site-subtitle">Professional HTTP & DNS Tool</p>
                    </div>
                </div>

                <div class="flex items-center gap-4">
                    <div id="rate-limit-display" class="text-sm font-medium text-gray-600"></div>
                    <div id="auth-container">
                        <button id="sign-in-btn" class="bg-gradient-to-r from-primary to-secondary text-white px-6 py-3 rounded-xl font-semibold hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1">
                            <span class="material-icons text-sm align-middle mr-1">login</span>
                            <span data-i18n="sign-in">Sign In</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-6 py-12">

        <!-- Hero Section -->
        <div class="text-center mb-12 animate-fade-in">
            <h2 class="text-5xl font-extrabold text-gray-900 mb-4" data-i18n="hero-title">
                Check URL Status Codes Instantly
            </h2>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto" data-i18n="hero-subtitle">
                Professional tool for checking HTTP status codes, DNS propagation, and troubleshooting website issues. Free for up to 100 URLs.
            </p>
        </div>

        <!-- URL Input Section -->
        <div class="glass rounded-3xl shadow-2xl p-8 mb-12 border border-indigo-100 animate-slide-up">
            <div class="mb-6">
                <label for="url-input" class="block text-lg font-bold text-gray-900 mb-3" data-i18n="input-label">
                    Enter URLs to Check (one per line)
                </label>
                <div class="relative">
                    <textarea
                        id="url-input"
                        rows="8"
                        class="w-full px-6 py-4 border-2 border-indigo-200 rounded-2xl focus:border-primary focus:ring-4 focus:ring-primary/20 transition-all font-mono text-sm resize-none"
                        placeholder="https://example.com&#10;https://google.com&#10;https://github.com"
                        data-i18n-placeholder="input-placeholder"
                    ></textarea>
                    <div id="url-counter" class="absolute bottom-4 right-4 px-4 py-2 bg-white rounded-lg shadow-md font-bold text-sm">
                        <span id="url-count" class="text-gray-700">0</span>
                        <span class="text-gray-400">/100</span>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex flex-wrap gap-4">
                <button id="check-btn" class="flex-1 bg-gradient-to-r from-primary to-secondary text-white px-8 py-4 rounded-xl font-bold text-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1 disabled:opacity-50 disabled:cursor-not-allowed">
                    <span class="material-icons align-middle mr-2">play_arrow</span>
                    <span data-i18n="check-button">Check Status</span>
                </button>

                <button id="load-examples-btn" class="px-8 py-4 border-2 border-indigo-300 text-indigo-700 rounded-xl font-bold hover:bg-indigo-50 transition-all">
                    <span class="material-icons align-middle mr-2">lightbulb</span>
                    <span data-i18n="load-examples">Load Examples</span>
                </button>

                <button id="clear-btn" class="px-8 py-4 border-2 border-gray-300 text-gray-700 rounded-xl font-bold hover:bg-gray-50 transition-all">
                    <span class="material-icons align-middle mr-2">clear</span>
                    <span data-i18n="clear-button">Clear</span>
                </button>
            </div>

            <!-- File Upload -->
            <div id="file-upload-zone" class="mt-6 border-2 border-dashed border-indigo-300 rounded-2xl p-8 text-center hover:border-primary hover:bg-indigo-50/50 transition-all cursor-pointer hidden">
                <input type="file" id="file-input" accept=".txt,.csv" class="hidden">
                <span class="material-icons text-6xl text-indigo-400 mb-3">cloud_upload</span>
                <p class="text-lg font-semibold text-gray-700" data-i18n="file-upload-title">Drop a file or click to upload</p>
                <p class="text-sm text-gray-500" data-i18n="file-upload-subtitle">Supports TXT and CSV files</p>
            </div>
        </div>

        <!-- Loading State -->
        <div id="loading-state" class="hidden glass rounded-3xl shadow-2xl p-12 mb-12 text-center border border-indigo-100">
            <div class="inline-block w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mb-4"></div>
            <p class="text-xl font-bold text-gray-700" data-i18n="checking">Checking URLs...</p>
        </div>

        <!-- Results Section -->
        <div id="results-section" class="hidden animate-fade-in">
            <!-- Summary Cards -->
            <div id="results-summary" class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"></div>

            <!-- Results List -->
            <div class="glass rounded-3xl shadow-2xl p-8 border border-indigo-100">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-bold text-gray-900" data-i18n="results-title">Check Results</h3>
                    <button id="export-csv-btn" class="px-6 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition-all">
                        <span class="material-icons align-middle mr-2">download</span>
                        <span data-i18n="export-csv">Export CSV</span>
                    </button>
                </div>
                <div id="results-list" class="space-y-4"></div>
            </div>
        </div>

    </main>

    <!-- Footer -->
    <footer class="mt-20 py-12 glass border-t border-indigo-100">
        <div class="max-w-7xl mx-auto px-6 text-center">
            <p class="text-gray-600" data-i18n="footer-text">
                © 2025 URL Status Checker. Professional HTTP status code and DNS propagation tool.
            </p>
            <p class="text-sm text-gray-500 mt-2" data-i18n="footer-made-with">
                Made with ❤️ for developers and SEO professionals worldwide
            </p>
        </div>
    </footer>

    <!-- Toast Container -->
    <div id="toast-container" class="fixed bottom-6 right-6 z-50 space-y-3"></div>

    <!-- Pricing Modal -->
    <div id="pricing-modal" class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-6">
        <div class="glass rounded-3xl shadow-2xl max-w-5xl w-full p-8 max-h-[90vh] overflow-y-auto border border-indigo-200">
            <div class="flex justify-between items-center mb-8">
                <h3 class="text-3xl font-bold text-gray-900" data-i18n="pricing-title">Choose Your Plan</h3>
                <button onclick="closePricingModal()" class="text-gray-500 hover:text-gray-700">
                    <span class="material-icons text-3xl">close</span>
                </button>
            </div>
            <div id="pricing-content" class="grid grid-cols-1 md:grid-cols-3 gap-6"></div>
        </div>
    </div>

    <script>
        // ==================== CONFIGURATION ====================
        const API_BASE = 'https://o1oy52froa.execute-api.us-east-1.amazonaws.com/production';
        const GOOGLE_CLIENT_ID = '242648112266-iglul54tuis9mhucsp1pmpqg0a48l8i0.apps.googleusercontent.com';
        const STRIPE_PUBLIC_KEY = 'pk_live_51SEhK7Ikj5YQseOZdDlxSF559wAxa2VaukNqsoFjehtq26Yr6lftlDso5HxqGyKVZy907ylLHgFOPYp9tBKLEDzk00KEYnlJ15';

        const stripe = Stripe(STRIPE_PUBLIC_KEY);

        // ==================== TRANSLATIONS ====================
        const translations = {
            en: {
                'site-title': 'URL Status Checker',
                'site-subtitle': 'Professional HTTP & DNS Tool',
                'sign-in': 'Sign In',
                'sign-out': 'Sign Out',
                'hero-title': 'Check URL Status Codes Instantly',
                'hero-subtitle': 'Professional tool for checking HTTP status codes, DNS propagation, and troubleshooting website issues. Free for up to 100 URLs.',
                'input-label': 'Enter URLs to Check (one per line)',
                'input-placeholder': 'https://example.com\nhttps://google.com\nhttps://github.com',
                'check-button': 'Check Status',
                'load-examples': 'Load Examples',
                'clear-button': 'Clear',
                'file-upload-title': 'Drop a file or click to upload',
                'file-upload-subtitle': 'Supports TXT and CSV files',
                'checking': 'Checking URLs...',
                'results-title': 'Check Results',
                'export-csv': 'Export CSV',
                'footer-text': '© 2025 URL Status Checker. Professional HTTP status code and DNS propagation tool.',
                'footer-made-with': 'Made with ❤️ for developers and SEO professionals worldwide',
                'pricing-title': 'Choose Your Plan',
                'online': 'Online',
                'offline': 'Offline',
                'total-checked': 'Total Checked',
                'avg-time': 'Avg. Time (ms)',
                'status-code': 'Status Code',
                'response-time': 'Response Time',
                'check-dns': 'Check DNS',
                'add-favorite': 'Add to Favorites',
                'remove-favorite': 'Remove from Favorites',
                'sign-in-favorites': 'Sign in to save URLs to your favorites list',
                'view-details': 'View Details',
                'hide-details': 'Hide Details',
                'description': 'Description',
                'possible-problems': 'Possible Problems',
                'solutions': 'Solutions',
                'dns-propagation': 'DNS Propagation Check'
            },
            es: {
                'site-title': 'Verificador de Estado de URL',
                'site-subtitle': 'Herramienta Profesional HTTP y DNS',
                'sign-in': 'Iniciar Sesión',
                'sign-out': 'Cerrar Sesión',
                'hero-title': 'Verifica Códigos de Estado de URL Instantáneamente',
                'hero-subtitle': 'Herramienta profesional para verificar códigos de estado HTTP, propagación DNS y solucionar problemas de sitios web. Gratis para hasta 100 URLs.',
                'input-label': 'Ingrese URLs para Verificar (una por línea)',
                'input-placeholder': 'https://ejemplo.com\nhttps://google.com\nhttps://github.com',
                'check-button': 'Verificar Estado',
                'load-examples': 'Cargar Ejemplos',
                'clear-button': 'Limpiar',
                'file-upload-title': 'Suelta un archivo o haz clic para subir',
                'file-upload-subtitle': 'Soporta archivos TXT y CSV',
                'checking': 'Verificando URLs...',
                'results-title': 'Resultados de Verificación',
                'export-csv': 'Exportar CSV',
                'footer-text': '© 2025 Verificador de Estado de URL. Herramienta profesional de códigos de estado HTTP y propagación DNS.',
                'footer-made-with': 'Hecho con ❤️ para desarrolladores y profesionales SEO en todo el mundo',
                'pricing-title': 'Elige Tu Plan',
                'online': 'En Línea',
                'offline': 'Fuera de Línea',
                'total-checked': 'Total Verificado',
                'avg-time': 'Tiempo Promedio (ms)',
                'status-code': 'Código de Estado',
                'response-time': 'Tiempo de Respuesta',
                'check-dns': 'Verificar DNS',
                'add-favorite': 'Añadir a Favoritos',
                'remove-favorite': 'Quitar de Favoritos',
                'sign-in-favorites': 'Inicia sesión para guardar URLs en tu lista de favoritos',
                'view-details': 'Ver Detalles',
                'hide-details': 'Ocultar Detalles',
                'description': 'Descripción',
                'possible-problems': 'Posibles Problemas',
                'solutions': 'Soluciones',
                'dns-propagation': 'Verificación de Propagación DNS'
            }
        };

        // ==================== STATUS CODE DATABASE ====================
        const statusCodeDatabase = {
            200: {
                name: 'OK',
                desc: {
                    en: 'The request was successful and the server returned the requested resource.',
                    es: 'La solicitud fue exitosa y el servidor devolvió el recurso solicitado.'
                },
                problems: {
                    en: 'No problems - this is the ideal response.',
                    es: 'Sin problemas - esta es la respuesta ideal.'
                },
                solutions: {
                    en: 'No action needed. Your URL is working correctly.',
                    es: 'No se requiere acción. Tu URL funciona correctamente.'
                }
            },
            301: {
                name: 'Moved Permanently',
                desc: {
                    en: 'The requested resource has been permanently moved to a new URL.',
                    es: 'El recurso solicitado se ha movido permanentemente a una nueva URL.'
                },
                problems: {
                    en: 'May cause SEO issues if not handled properly. Search engines will index the new URL.',
                    es: 'Puede causar problemas de SEO si no se maneja correctamente. Los motores de búsqueda indexarán la nueva URL.'
                },
                solutions: {
                    en: 'Update your links to point to the new URL. Verify redirect chain is not too long.',
                    es: 'Actualiza tus enlaces para apuntar a la nueva URL. Verifica que la cadena de redirección no sea demasiado larga.'
                }
            },
            302: {
                name: 'Found (Temporary Redirect)',
                desc: {
                    en: 'The resource is temporarily located at a different URL.',
                    es: 'El recurso está temporalmente ubicado en una URL diferente.'
                },
                problems: {
                    en: 'Search engines may not pass full link equity. Can cause confusion about canonical URL.',
                    es: 'Los motores de búsqueda pueden no pasar el valor completo del enlace. Puede causar confusión sobre la URL canónica.'
                },
                solutions: {
                    en: 'Use 301 redirect for permanent moves. Ensure temporary redirects are actually temporary.',
                    es: 'Usa redirección 301 para movimientos permanentes. Asegúrate que las redirecciones temporales sean realmente temporales.'
                }
            },
            400: {
                name: 'Bad Request',
                desc: {
                    en: 'The server cannot process the request due to client error.',
                    es: 'El servidor no puede procesar la solicitud debido a un error del cliente.'
                },
                problems: {
                    en: 'Malformed request syntax, invalid request message, or deceptive request routing.',
                    es: 'Sintaxis de solicitud malformada, mensaje de solicitud inválido o enrutamiento de solicitud engañoso.'
                },
                solutions: {
                    en: 'Check URL format, query parameters, and request headers. Verify API payload if using POST/PUT.',
                    es: 'Verifica el formato de URL, parámetros de consulta y encabezados de solicitud. Verifica la carga útil de API si usas POST/PUT.'
                }
            },
            401: {
                name: 'Unauthorized',
                desc: {
                    en: 'Authentication is required and has failed or not been provided.',
                    es: 'Se requiere autenticación y ha fallado o no se ha proporcionado.'
                },
                problems: {
                    en: 'Missing or invalid authentication credentials. Token may be expired.',
                    es: 'Credenciales de autenticación faltantes o inválidas. El token puede haber expirado.'
                },
                solutions: {
                    en: 'Provide valid credentials, refresh authentication token, or check API key validity.',
                    es: 'Proporciona credenciales válidas, actualiza el token de autenticación o verifica la validez de la clave API.'
                }
            },
            403: {
                name: 'Forbidden',
                desc: {
                    en: 'Server understood the request but refuses to authorize it.',
                    es: 'El servidor entendió la solicitud pero se niega a autorizarla.'
                },
                problems: {
                    en: 'Insufficient permissions, IP blocked, or resource requires special access.',
                    es: 'Permisos insuficientes, IP bloqueada o el recurso requiere acceso especial.'
                },
                solutions: {
                    en: 'Check user permissions, verify IP whitelist, contact site administrator for access.',
                    es: 'Verifica permisos de usuario, verifica lista blanca de IP, contacta al administrador del sitio para acceso.'
                }
            },
            404: {
                name: 'Not Found',
                desc: {
                    en: 'The requested resource could not be found on the server.',
                    es: 'El recurso solicitado no se pudo encontrar en el servidor.'
                },
                problems: {
                    en: 'Broken link, deleted page, incorrect URL, or typo in the address.',
                    es: 'Enlace roto, página eliminada, URL incorrecta o error tipográfico en la dirección.'
                },
                solutions: {
                    en: 'Verify URL spelling, check if page was moved, update broken links, implement 301 redirects for moved content.',
                    es: 'Verifica ortografía de URL, verifica si la página fue movida, actualiza enlaces rotos, implementa redirecciones 301 para contenido movido.'
                }
            },
            500: {
                name: 'Internal Server Error',
                desc: {
                    en: 'The server encountered an unexpected condition that prevented it from fulfilling the request.',
                    es: 'El servidor encontró una condición inesperada que le impidió cumplir la solicitud.'
                },
                problems: {
                    en: 'Server-side script error, database connection failed, or server misconfiguration.',
                    es: 'Error de script del lado del servidor, fallo de conexión a base de datos o configuración incorrecta del servidor.'
                },
                solutions: {
                    en: 'Check server logs, verify database connectivity, review recent code changes, contact hosting provider.',
                    es: 'Verifica registros del servidor, verifica conectividad de base de datos, revisa cambios recientes de código, contacta proveedor de hosting.'
                }
            },
            502: {
                name: 'Bad Gateway',
                desc: {
                    en: 'The server received an invalid response from an upstream server.',
                    es: 'El servidor recibió una respuesta inválida de un servidor upstream.'
                },
                problems: {
                    en: 'Upstream server down, network issues, or proxy misconfiguration.',
                    es: 'Servidor upstream caído, problemas de red o configuración incorrecta del proxy.'
                },
                solutions: {
                    en: 'Check upstream server status, verify proxy configuration, restart web server, check firewall rules.',
                    es: 'Verifica estado del servidor upstream, verifica configuración del proxy, reinicia servidor web, verifica reglas del firewall.'
                }
            },
            503: {
                name: 'Service Unavailable',
                desc: {
                    en: 'The server is temporarily unable to handle the request.',
                    es: 'El servidor no puede manejar temporalmente la solicitud.'
                },
                problems: {
                    en: 'Server maintenance, overloaded server, or DDoS attack.',
                    es: 'Mantenimiento del servidor, servidor sobrecargado o ataque DDoS.'
                },
                solutions: {
                    en: 'Wait and retry, check server capacity, implement load balancing, enable caching.',
                    es: 'Espera y reintenta, verifica capacidad del servidor, implementa balanceo de carga, habilita caché.'
                }
            },
            504: {
                name: 'Gateway Timeout',
                desc: {
                    en: 'The server did not receive a timely response from an upstream server.',
                    es: 'El servidor no recibió una respuesta oportuna de un servidor upstream.'
                },
                problems: {
                    en: 'Slow upstream server, network congestion, or timeout settings too low.',
                    es: 'Servidor upstream lento, congestión de red o configuración de tiempo de espera demasiado baja.'
                },
                solutions: {
                    en: 'Increase timeout settings, optimize upstream server performance, check network connectivity.',
                    es: 'Aumenta configuración de tiempo de espera, optimiza rendimiento del servidor upstream, verifica conectividad de red.'
                }
            }
        };

        // ==================== STATE ====================
        let currentLanguage = 'en';
        let currentUser = null;
        let userToken = null;
        let favorites = [];
        let lastResults = [];
        let currentPlan = 'free';
        let rateLimit = { count: 0, resetTime: 0 };

        const planLimits = {
            free: { checksPerDay: 4, urlsPerCheck: 100, maxFavorites: 100 },
            pro: { checksPerDay: -1, urlsPerCheck: 100, maxFavorites: 1000 },
            business: { checksPerDay: -1, urlsPerCheck: 500, maxFavorites: -1 }
        };

        // ==================== INITIALIZATION ====================
        document.addEventListener('DOMContentLoaded', () => {
            initializeLanguage();
            initializeEventListeners();
            initializeGoogleAuth();
            loadRateLimitFromStorage();
            checkExistingSession();
            updateURLCounter();
        });

        function initializeLanguage() {
            // Detect browser language
            const browserLang = navigator.language.split('-')[0];
            if (browserLang === 'es') {
                currentLanguage = 'es';
                document.getElementById('language-selector').value = 'es';
                document.documentElement.lang = 'es';
            }
            applyTranslations();
        }

        function applyTranslations() {
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (translations[currentLanguage][key]) {
                    el.textContent = translations[currentLanguage][key];
                }
            });

            document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
                const key = el.getAttribute('data-i18n-placeholder');
                if (translations[currentLanguage][key]) {
                    el.placeholder = translations[currentLanguage][key];
                }
            });
        }

        function initializeEventListeners() {
            document.getElementById('language-selector').addEventListener('change', (e) => {
                currentLanguage = e.target.value;
                document.documentElement.lang = currentLanguage;
                applyTranslations();
                // Re-render results if they exist
                if (lastResults.length > 0) {
                    displayResults(lastResults);
                }
            });

            document.getElementById('url-input').addEventListener('input', updateURLCounter);
            document.getElementById('check-btn').addEventListener('click', checkURLs);
            document.getElementById('clear-btn').addEventListener('click', clearInput);
            document.getElementById('load-examples-btn').addEventListener('click', loadExamples);
            document.getElementById('export-csv-btn').addEventListener('click', exportToCSV);
            document.getElementById('sign-in-btn').addEventListener('click', signIn);
        }

        function initializeGoogleAuth() {
            if (typeof google !== 'undefined' && google.accounts) {
                google.accounts.id.initialize({
                    client_id: GOOGLE_CLIENT_ID,
                    callback: handleGoogleAuth
                });
            }
        }

        // ==================== URL COUNTER ====================
        function updateURLCounter() {
            const textarea = document.getElementById('url-input');
            const urls = textarea.value.trim().split('\n').filter(url => url.trim());
            const count = urls.length;

            const counter = document.getElementById('url-count');
            const counterDiv = document.getElementById('url-counter');

            counter.textContent = count;

            // Color coding
            if (count === 0) {
                counterDiv.className = 'absolute bottom-4 right-4 px-4 py-2 bg-white rounded-lg shadow-md font-bold text-sm';
                counter.className = 'text-gray-700';
            } else if (count <= 50) {
                counterDiv.className = 'absolute bottom-4 right-4 px-4 py-2 bg-green-50 rounded-lg shadow-md font-bold text-sm';
                counter.className = 'text-green-600';
            } else if (count <= 80) {
                counterDiv.className = 'absolute bottom-4 right-4 px-4 py-2 bg-yellow-50 rounded-lg shadow-md font-bold text-sm';
                counter.className = 'text-yellow-600';
            } else {
                counterDiv.className = 'absolute bottom-4 right-4 px-4 py-2 bg-red-50 rounded-lg shadow-md font-bold text-sm';
                counter.className = 'text-red-600';
            }
        }

        // ==================== CHECK URLs ====================
        async function checkURLs() {
            const textarea = document.getElementById('url-input');
            const urls = textarea.value.trim().split('\n')
                .filter(url => url.trim())
                .map(url => url.trim());

            if (urls.length === 0) {
                showToast('Please enter at least one URL', 'warning');
                return;
            }

            if (urls.length > planLimits[currentPlan].urlsPerCheck) {
                showToast(`Maximum ${planLimits[currentPlan].urlsPerCheck} URLs per check`, 'warning');
                return;
            }

            // Check rate limit
            const rateLimitCheck = checkRateLimit();
            if (!rateLimitCheck.allowed) {
                showToast('Daily check limit reached. Upgrade for unlimited checks!', 'warning');
                showPricingModal();
                return;
            }

            // Show loading
            document.getElementById('loading-state').classList.remove('hidden');
            document.getElementById('results-section').classList.add('hidden');

            try {
                const response = await fetch(API_BASE + '/batch/check', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${userToken || 'anonymous'}`
                    },
                    body: JSON.stringify({ urls })
                });

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}`);
                }

                const data = await response.json();
                lastResults = data.results || [];

                updateRateLimit();
                displayResults(lastResults);
                showToast('URLs checked successfully!', 'success');

            } catch (error) {
                console.error('Check error:', error);
                showToast('Error checking URLs. Please try again.', 'error');
            } finally {
                document.getElementById('loading-state').classList.add('hidden');
            }
        }

        // ==================== DISPLAY RESULTS ====================
        function displayResults(results) {
            document.getElementById('results-section').classList.remove('hidden');

            // Calculate summary
            const total = results.length;
            const successful = results.filter(r => r.statusCode >= 200 && r.statusCode < 400).length;
            const failed = total - successful;
            const avgTime = Math.round(results.reduce((sum, r) => sum + (r.responseTime || 0), 0) / total);

            // Display summary cards
            const summary = document.getElementById('results-summary');
            summary.innerHTML = `
                <div class="glass rounded-2xl p-6 text-center border border-green-200 animate-scale-in">
                    <span class="material-icons text-green-500 text-5xl mb-3">check_circle</span>
                    <div class="text-4xl font-bold text-green-600">${successful}</div>
                    <div class="text-sm font-medium text-gray-600" data-i18n="online">Online</div>
                </div>
                <div class="glass rounded-2xl p-6 text-center border border-red-200 animate-scale-in" style="animation-delay: 0.1s;">
                    <span class="material-icons text-red-500 text-5xl mb-3">error</span>
                    <div class="text-4xl font-bold text-red-600">${failed}</div>
                    <div class="text-sm font-medium text-gray-600" data-i18n="offline">Offline</div>
                </div>
                <div class="glass rounded-2xl p-6 text-center border border-blue-200 animate-scale-in" style="animation-delay: 0.2s;">
                    <span class="material-icons text-blue-500 text-5xl mb-3">language</span>
                    <div class="text-4xl font-bold text-blue-600">${total}</div>
                    <div class="text-sm font-medium text-gray-600" data-i18n="total-checked">Total Checked</div>
                </div>
                <div class="glass rounded-2xl p-6 text-center border border-purple-200 animate-scale-in" style="animation-delay: 0.3s;">
                    <span class="material-icons text-purple-500 text-5xl mb-3">speed</span>
                    <div class="text-4xl font-bold text-purple-600">${avgTime}</div>
                    <div class="text-sm font-medium text-gray-600" data-i18n="avg-time">Avg. Time (ms)</div>
                </div>
            `;

            // Apply translations to summary
            applyTranslations();

            // Display individual results
            const resultsList = document.getElementById('results-list');
            resultsList.innerHTML = results.map((result, index) => {
                const isSuccess = result.statusCode >= 200 && result.statusCode < 400;
                const url = result.url || result.fullUrl;
                const isFavorite = favorites.includes(url);
                const statusInfo = statusCodeDatabase[result.statusCode] || {
                    name: 'Unknown',
                    desc: { en: 'Status code not documented', es: 'Código de estado no documentado' },
                    problems: { en: 'Unknown', es: 'Desconocido' },
                    solutions: { en: 'Contact website administrator', es: 'Contacta al administrador del sitio' }
                };

                return `
                    <div class="glass rounded-2xl p-6 border ${isSuccess ? 'border-green-200' : 'border-red-200'} hover:shadow-xl transition-all animate-fade-in" style="animation-delay: ${index * 0.05}s;">
                        <div class="flex items-start justify-between gap-4 mb-4">
                            <div class="flex-1 min-w-0">
                                <div class="flex items-center gap-3 mb-3">
                                    <button onclick="toggleFavorite('${encodeURIComponent(url)}')" class="transform hover:scale-125 transition-transform">
                                        <span class="material-icons text-2xl ${isFavorite ? 'text-yellow-500' : 'text-gray-400'}">${isFavorite ? 'star' : 'star_border'}</span>
                                    </button>
                                    <a href="${url}" target="_blank" class="text-lg font-semibold text-gray-900 hover:text-primary break-all">${url}</a>
                                </div>

                                <div class="flex flex-wrap items-center gap-3 ml-11">
                                    <button onclick="toggleDetails('details-${index}')" class="status-badge inline-flex items-center gap-2 px-4 py-2 rounded-xl font-bold ${isSuccess ? 'bg-green-100 text-green-700 border-2 border-green-300' : 'bg-red-100 text-red-700 border-2 border-red-300'} hover:shadow-lg">
                                        <span class="text-xl">${result.statusCode}</span>
                                        <span class="text-sm">${statusInfo.name}</span>
                                        <span class="material-icons text-sm" id="arrow-details-${index}">expand_more</span>
                                    </button>

                                    <span class="inline-flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-xl text-sm font-medium text-gray-700">
                                        <span class="material-icons text-sm">schedule</span>
                                        ${result.responseTime || 0} ms
                                    </span>

                                    <button onclick="openDNSChecker('${encodeURIComponent(url)}')" class="inline-flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-xl text-sm font-bold hover:bg-blue-600 hover:shadow-lg transition-all">
                                        <span class="material-icons text-sm">dns</span>
                                        <span data-i18n="check-dns">Check DNS</span>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Expandable Details -->
                        <div id="details-${index}" class="hidden ml-11 mt-4 p-6 bg-white rounded-xl border-2 border-indigo-100 animate-fade-in">
                            <h4 class="text-lg font-bold text-gray-900 mb-4 flex items-center gap-2">
                                <span class="material-icons text-primary">info</span>
                                <span data-i18n="status-code">Status Code</span>: ${result.statusCode} - ${statusInfo.name}
                            </h4>
                            <div class="space-y-4 text-sm">
                                <div>
                                    <span class="font-bold text-gray-700" data-i18n="description">Description</span>
                                    <p class="text-gray-600 mt-1">${statusInfo.desc[currentLanguage]}</p>
                                </div>
                                <div>
                                    <span class="font-bold text-yellow-700" data-i18n="possible-problems">Possible Problems</span>
                                    <p class="text-gray-600 mt-1">${statusInfo.problems[currentLanguage]}</p>
                                </div>
                                <div>
                                    <span class="font-bold text-green-700" data-i18n="solutions">Solutions</span>
                                    <p class="text-gray-600 mt-1">${statusInfo.solutions[currentLanguage]}</p>
                                </div>
                                <div>
                                    <span class="font-bold text-gray-700" data-i18n="response-time">Response Time</span>
                                    <p class="text-gray-600 mt-1">${result.responseTime || 0} ms</p>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            // Apply translations
            applyTranslations();

            // Scroll to results
            document.getElementById('results-section').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        function toggleDetails(elementId) {
            const details = document.getElementById(elementId);
            const arrow = document.getElementById('arrow-' + elementId);

            if (details.classList.contains('hidden')) {
                details.classList.remove('hidden');
                arrow.textContent = 'expand_less';
            } else {
                details.classList.add('hidden');
                arrow.textContent = 'expand_more';
            }
        }

        // ==================== DNS CHECKER ====================
        function openDNSChecker(encodedUrl) {
            const url = decodeURIComponent(encodedUrl);
            const domain = new URL(url).hostname;
            window.open(`/dns-propagation.html?domain=${encodeURIComponent(domain)}`, '_blank', 'width=1200,height=800');
        }

        // ==================== FAVORITES ====================
        async function toggleFavorite(encodedUrl) {
            const url = decodeURIComponent(encodedUrl);

            if (!currentUser) {
                showToast(translations[currentLanguage]['sign-in-favorites'], 'info');
                signIn();
                return;
            }

            const isFavorite = favorites.includes(url);

            try {
                if (isFavorite) {
                    // Remove favorite
                    await fetch(API_BASE + '/favorites', {
                        method: 'DELETE',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${userToken}`
                        },
                        body: JSON.stringify({ url })
                    });
                    favorites = favorites.filter(f => f !== url);
                    showToast('Removed from favorites', 'success');
                } else {
                    // Add favorite
                    if (favorites.length >= planLimits[currentPlan].maxFavorites && planLimits[currentPlan].maxFavorites !== -1) {
                        showToast(`Maximum ${planLimits[currentPlan].maxFavorites} favorites reached. Upgrade for more!`, 'warning');
                        showPricingModal();
                        return;
                    }

                    await fetch(API_BASE + '/favorites', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${userToken}`
                        },
                        body: JSON.stringify({ url })
                    });
                    favorites.push(url);
                    showToast('Added to favorites', 'success');
                }

                // Re-render results
                if (lastResults.length > 0) {
                    displayResults(lastResults);
                }
            } catch (error) {
                console.error('Favorite error:', error);
                showToast('Error updating favorites', 'error');
            }
        }

        // ==================== UTILITIES ====================
        function clearInput() {
            document.getElementById('url-input').value = '';
            updateURLCounter();
        }

        function loadExamples() {
            const examples = [
                'https://google.com',
                'https://github.com',
                'https://stackoverflow.com',
                'https://example.com',
                'https://nonexistent-site-12345.com'
            ];
            document.getElementById('url-input').value = examples.join('\n');
            updateURLCounter();
        }

        function exportToCSV() {
            if (lastResults.length === 0) {
                showToast('No results to export', 'warning');
                return;
            }

            const headers = ['URL', 'Status Code', 'Status Name', 'Response Time (ms)'];
            const rows = lastResults.map(r => [
                r.url || r.fullUrl,
                r.statusCode,
                statusCodeDatabase[r.statusCode]?.name || 'Unknown',
                r.responseTime || 0
            ]);

            const csv = [headers, ...rows].map(row => row.join(',')).join('\n');
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `url-status-check-${Date.now()}.csv`;
            a.click();
            URL.revokeObjectURL(url);

            showToast('CSV exported successfully', 'success');
        }

        // ==================== RATE LIMITING ====================
        function checkRateLimit() {
            const now = Date.now();
            const maxChecks = planLimits[currentPlan].checksPerDay;

            if (maxChecks === -1) return { allowed: true, remaining: 'unlimited' };

            if (now > rateLimit.resetTime) {
                rateLimit = { count: 0, resetTime: now + 24 * 60 * 60 * 1000 };
                saveRateLimitToStorage();
            }

            return {
                allowed: rateLimit.count < maxChecks,
                remaining: Math.max(0, maxChecks - rateLimit.count)
            };
        }

        function updateRateLimit() {
            if (planLimits[currentPlan].checksPerDay !== -1) {
                rateLimit.count++;
                saveRateLimitToStorage();
            }
            updateRateLimitDisplay();
        }

        function updateRateLimitDisplay() {
            const check = checkRateLimit();
            const display = document.getElementById('rate-limit-display');

            if (check.remaining === 'unlimited') {
                display.textContent = '∞ Unlimited checks';
            } else {
                display.textContent = `${check.remaining} checks left today`;
            }
        }

        function loadRateLimitFromStorage() {
            const stored = localStorage.getItem('urlstatuschecker-rate-limit');
            if (stored) {
                rateLimit = JSON.parse(stored);
            }
            updateRateLimitDisplay();
        }

        function saveRateLimitToStorage() {
            localStorage.setItem('urlstatuschecker-rate-limit', JSON.stringify(rateLimit));
        }

        // ==================== AUTHENTICATION ====================
        function signIn() {
            if (typeof google !== 'undefined' && google.accounts) {
                google.accounts.id.prompt();
            }
        }

        async function handleGoogleAuth(response) {
            try {
                const authResponse = await fetch('https://auth.urlstatuschecker.com/auth/google', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        credential: response.credential,
                        idToken: response.credential
                    })
                });

                if (!authResponse.ok) throw new Error('Auth failed');

                const data = await authResponse.json();
                currentUser = data.user;
                userToken = data.token;

                localStorage.setItem('urlstatuschecker-token', userToken);
                localStorage.setItem('urlstatuschecker-user', JSON.stringify(currentUser));

                updateAuthDisplay();
                loadUserFavorites();
                showToast(`Welcome, ${currentUser.name}!`, 'success');

            } catch (error) {
                console.error('Auth error:', error);
                showToast('Authentication failed', 'error');
            }
        }

        function updateAuthDisplay() {
            const container = document.getElementById('auth-container');
            if (currentUser) {
                container.innerHTML = `
                    <div class="flex items-center gap-4">
                        <img src="${currentUser.picture}" alt="${currentUser.name}" class="w-10 h-10 rounded-full border-2 border-primary">
                        <span class="font-semibold text-gray-700">${currentUser.name}</span>
                        <button onclick="signOut()" class="px-4 py-2 border-2 border-gray-300 rounded-lg font-medium hover:bg-gray-50 transition-all">
                            <span data-i18n="sign-out">Sign Out</span>
                        </button>
                    </div>
                `;
                document.getElementById('file-upload-zone').classList.remove('hidden');
            } else {
                container.innerHTML = `
                    <button id="sign-in-btn" onclick="signIn()" class="bg-gradient-to-r from-primary to-secondary text-white px-6 py-3 rounded-xl font-semibold hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1">
                        <span class="material-icons text-sm align-middle mr-1">login</span>
                        <span data-i18n="sign-in">Sign In</span>
                    </button>
                `;
                document.getElementById('file-upload-zone').classList.add('hidden');
            }
            applyTranslations();
        }

        function signOut() {
            currentUser = null;
            userToken = null;
            favorites = [];
            localStorage.removeItem('urlstatuschecker-token');
            localStorage.removeItem('urlstatuschecker-user');
            updateAuthDisplay();
            showToast('Signed out successfully', 'success');
        }

        async function checkExistingSession() {
            const token = localStorage.getItem('urlstatuschecker-token');
            const user = localStorage.getItem('urlstatuschecker-user');

            if (token && user) {
                currentUser = JSON.parse(user);
                userToken = token;
                updateAuthDisplay();
                loadUserFavorites();
            }
        }

        async function loadUserFavorites() {
            if (!userToken) return;

            try {
                const response = await fetch(API_BASE + '/favorites', {
                    headers: {
                        'Authorization': `Bearer ${userToken}`
                    }
                });

                if (response.ok) {
                    const data = await response.json();
                    favorites = data.favorites || [];
                }
            } catch (error) {
                console.error('Load favorites error:', error);
            }
        }

        // ==================== TOAST NOTIFICATIONS ====================
        function showToast(message, type = 'info') {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');

            const colors = {
                success: 'bg-green-100 border-green-400 text-green-700',
                error: 'bg-red-100 border-red-400 text-red-700',
                warning: 'bg-yellow-100 border-yellow-400 text-yellow-700',
                info: 'bg-blue-100 border-blue-400 text-blue-700'
            };

            const icons = {
                success: 'check_circle',
                error: 'error',
                warning: 'warning',
                info: 'info'
            };

            toast.className = `glass ${colors[type]} border-2 rounded-xl px-6 py-4 shadow-2xl animate-slide-up flex items-center gap-3 min-w-[300px]`;
            toast.innerHTML = `
                <span class="material-icons">${icons[type]}</span>
                <span class="font-medium flex-1">${message}</span>
                <button onclick="this.parentElement.remove()" class="material-icons text-sm hover:opacity-70">close</button>
            `;

            container.appendChild(toast);

            setTimeout(() => {
                if (toast.parentNode) {
                    toast.remove();
                }
            }, 5000);
        }

        // ==================== PRICING MODAL ====================
        function showPricingModal() {
            document.getElementById('pricing-modal').classList.remove('hidden');
            // Populate pricing content
            const content = document.getElementById('pricing-content');
            content.innerHTML = `
                <div class="glass rounded-2xl p-6 border-2 border-gray-300">
                    <h4 class="text-2xl font-bold text-gray-900 mb-4">Free</h4>
                    <div class="text-4xl font-bold text-gray-900 mb-6">$0<span class="text-lg font-normal text-gray-500">/mo</span></div>
                    <ul class="space-y-3 mb-6">
                        <li class="flex items-center gap-2"><span class="material-icons text-green-500">check_circle</span> 4 checks/day</li>
                        <li class="flex items-center gap-2"><span class="material-icons text-green-500">check_circle</span> 100 URLs per check</li>
                        <li class="flex items-center gap-2"><span class="material-icons text-green-500">check_circle</span> 100 favorites</li>
                    </ul>
                    <button disabled class="w-full py-3 bg-gray-300 text-gray-500 rounded-lg font-bold cursor-not-allowed">Current Plan</button>
                </div>
                <div class="glass rounded-2xl p-6 border-4 border-primary relative">
                    <div class="absolute -top-4 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-primary to-secondary text-white px-4 py-1 rounded-full text-sm font-bold">Popular</div>
                    <h4 class="text-2xl font-bold text-gray-900 mb-4">Pro</h4>
                    <div class="text-4xl font-bold text-gray-900 mb-6">$29<span class="text-lg font-normal text-gray-500">/mo</span></div>
                    <ul class="space-y-3 mb-6">
                        <li class="flex items-center gap-2"><span class="material-icons text-green-500">check_circle</span> Unlimited checks</li>
                        <li class="flex items-center gap-2"><span class="material-icons text-green-500">check_circle</span> 100 URLs per check</li>
                        <li class="flex items-center gap-2"><span class="material-icons text-green-500">check_circle</span> 1,000 favorites</li>
                        <li class="flex items-center gap-2"><span class="material-icons text-green-500">check_circle</span> Email alerts</li>
                    </ul>
                    <button onclick="upgradePlan('pro')" class="w-full py-3 bg-gradient-to-r from-primary to-secondary text-white rounded-lg font-bold hover:shadow-xl transition-all">Upgrade to Pro</button>
                </div>
                <div class="glass rounded-2xl p-6 border-2 border-gray-300">
                    <h4 class="text-2xl font-bold text-gray-900 mb-4">Business</h4>
                    <div class="text-4xl font-bold text-gray-900 mb-6">$99<span class="text-lg font-normal text-gray-500">/mo</span></div>
                    <ul class="space-y-3 mb-6">
                        <li class="flex items-center gap-2"><span class="material-icons text-green-500">check_circle</span> Unlimited checks</li>
                        <li class="flex items-center gap-2"><span class="material-icons text-green-500">check_circle</span> 500 URLs per check</li>
                        <li class="flex items-center gap-2"><span class="material-icons text-green-500">check_circle</span> Unlimited favorites</li>
                        <li class="flex items-center gap-2"><span class="material-icons text-green-500">check_circle</span> Priority support</li>
                        <li class="flex items-center gap-2"><span class="material-icons text-green-500">check_circle</span> API access</li>
                    </ul>
                    <button onclick="upgradePlan('business')" class="w-full py-3 bg-gradient-to-r from-primary to-secondary text-white rounded-lg font-bold hover:shadow-xl transition-all">Upgrade to Business</button>
                </div>
            `;
        }

        function closePricingModal() {
            document.getElementById('pricing-modal').classList.add('hidden');
        }

        async function upgradePlan(plan) {
            if (!currentUser) {
                showToast('Please sign in to upgrade', 'info');
                signIn();
                return;
            }

            const priceIds = {
                pro: 'price_1RywuZRE8RY21XQRPZeybWcZ',
                business: 'price_1RywuwRE8RY21XQRMligBZXP'
            };

            try {
                const { error } = await stripe.redirectToCheckout({
                    lineItems: [{ price: priceIds[plan], quantity: 1 }],
                    mode: 'subscription',
                    successUrl: window.location.origin + '?success=true',
                    cancelUrl: window.location.origin + '?canceled=true',
                    customerEmail: currentUser.email
                });

                if (error) {
                    showToast('Upgrade failed. Please try again.', 'error');
                }
            } catch (error) {
                console.error('Upgrade error:', error);
                showToast('Upgrade failed. Please try again.', 'error');
            }
        }
    </script>
</body>
</html>
